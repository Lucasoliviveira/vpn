#!/bin/bash
clear

[[ "$(whoami)" != "root" ]] && {
  echo -e "\033[1;37m[\033[1;31mErro\033[1;37m] - Você precisa executar como root!"
  exit 1
}

echo -e "\033[1;37m━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━"
echo -e "\033[1;32m      BEM VINDO AO SSH PLUS - CONFIGURAÇÃO"
echo -e "\033[1;37m━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━\033[0m"

read -p "Pressione ENTER para continuar ou CTRL+C para cancelar..."

# Atualização e instalação de dependências
echo -e "\nAtualizando pacotes e instalando dependências..."
apt-get update -y && apt-get upgrade -y
apt-get install -y python3 python3-pip git curl figlet lolcat

# Configuração de firewall
echo -e "\nConfigurando Firewall..."
firewall-cmd --zone=public --permanent --add-port=80/tcp
firewall-cmd --zone=public --permanent --add-port=443/tcp
firewall-cmd --reload

# Criação do comando 'menu'
echo -e "\nConfigurando o comando 'menu'..."
cat << EOF > /bin/menu
#!/bin/bash
echo "Bem-vindo ao menu do SSH Plus!"
echo "Opções ainda não configuradas."
EOF
chmod +x /bin/menu

# Otimização do Python
echo -e "\nOtimizando o Python..."
pip install --upgrade pip
pip install speedtest-cli

# Configurações no .bashrc
echo -e "\nCustomizando o ambiente..."
echo "clear" >> /root/.bashrc
echo 'figlet -k "SSH PLUS" | lolcat' >> /root/.bashrc
echo 'echo -e "\033[1;32m DIGITE: \033[1;31mmenu\033[0m"' >> /root/.bashrc

# Finalização
echo -e "\n\033[1;32mInstalação concluída com sucesso!"
echo -e "Reinicie o terminal e digite \033[1;31mmenu\033[1;32m para começar.\033[0m"
